---
title: "PEC_3_SAD"
author: "Joel Calero Rodriguez y Manuel Rosario Marín Fernández"
date: "27/12/2021"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(ggplot2)
```

# Apartado 1

#### Estudiar la respuesta inmunologica innata ex vivo en dos poblaciones de macrofagos (bazo y peritoneo) frente a diferentes antigenos del tratamiento. Las muestras fueron tomadas del modelo murino que recibieron el tratamiento alternativo (A) y el de referencia (B). Para estudiar el efecto del tumor en la respuesta innata, tambien se le suministro el tratamiento A y B en animales sin cancer. 
* ¿A que antigeno responden mas los macrofagos?
* ¿Responden los macrofagos a los mismos antigenos que se encuentran en el peritoneo y en el bazo? 
* ¿La presencia de tumor en los animales modifica la respuesta a los distintos antigenos?
   
#####  - A: Tratamiento A con tumor
#####  - B: Tratamiento A sin tumor
#####  - C: Tratamiento B con tumor
#####  - D: Tratamiento B sin tumor
#####  - I: Animal control con tumor
#####  - J: Animal control sin tumor:

```{r ej1, echo=FALSE}
folderPath <- c(getwd(),"/","DataBase_PEC3.csv") ## Leer ruta para cargar base de datos
csvFile <- paste0(folderPath,collapse = "")
dataMurine <- read.csv(csvFile,header = TRUE, sep = ",") ## Introducir datos

```

## Apartado 2

Texto aquí

```{r ej2}
head(dataMurine) # Mostrar datos

summary(dataMurine) # Significado de cada variable

str(dataMurine) # Tipo de valores de cada variable

## Dar nombre a los grupos para facilitar la comprension
groupNames <- factor(dataMurine$Grupo, levels = c("A","B","C","D","I","J"),labels = c("Tratamiento A con tumor","Tratamiento A sin tumor","Tratamiento B con tumor","Tratamiento B sin tumor","Animal control con tumor","Animal control sin tumor") )  
unique(groupNames) ## Comprobar que los labels estan introducidos correctamente
```

## Apartado 3
```{r}
# ?Cuantos valores N/A se encuentran en la Base de Datos? 
# Creo que se piden cuestiones como estas
cat("Existen un total de",table(!is.na(dataMurine))["FALSE"],"valores N/A en la base de datos") # Contar valores N/A

# Calcular la media de la reestimulacion de cada grupo
# Boxplot con los valores de reestimulacion por grupos


```


## Apartado 4

#### Realizar un análisis descriptivo de los datos. El análisis debe incluir (tal y como aparece en la Sección 3 de la PEC1) un resumen paramétrico de los datos y su representación gráfica, que mejor defina y complemente cada una de dichas variables. 
```{r}
#cambios de clase a ciertas variables para poder trabajar con ellas, de manera más clara
dataMurine$Grupo <- factor(dataMurine$Grupo, levels = c("A","B","C","D","I","J"))  
dataMurine$Región<- factor(dataMurine$Región,levels = c("Peritoneo", "Bazo"))
dataMurine$Antígeno<- factor(dataMurine$Antígeno,levels = c("1", "2","3"))
dataMurine=na.omit(dataMurine)# eliminación de valores NA
summary(dataMurine) #resumen parametrico de las variables
``` 
#### A continuación una representación de las diferentes variables:

``` {r}
par(mfrow=c(2,2))
plot(dataMurine$Antígeno, col = "cyan", xlab= "Antígeno") # el número de individuos por antigeno utilizado


plot(dataMurine$Grupo, col = "dark red", xlab= "Grupos") # el numero de individuos de cada grupo

plot(dataMurine$Región,col= "yellow", xlab= "Región") #el numero de individuos por región


plot(dataMurine$Grupo,dataMurine$Reestimulación,type='o', col = "green", xlab= "grupo", ylab= "reestimulación") #la reestimulación por cada grupo del estudio
```

```{r, echo= FALSE}
cat('Media por tratamientos(grupos A,B,C,D,I,J):')
dataMurine$Grupo <- factor(dataMurine$Grupo, levels = c("A","B","C","D","I","J"),labels = c("Tratamiento A con tumor","Tratamiento A sin tumor","Tratamiento B con tumor","Tratamiento B sin tumor","Animal control con tumor","Animal control sin tumor") )  #cambio de los caracteres por labels para mejor lectura de los datos
aggregate(dataMurine[, 5], list(dataMurine$Grupo), mean) #medias de reestimulación por grupo


```
#Separamos los diferentes grupos de estudio

```{r}
dataTrAtumor<-subset(dataMurine,dataMurine$Grupo== "Tratamiento A con tumor"); dataTrAtumor<-dataTrAtumor[-c(2)]
dataTrAtumorless<-subset(dataMurine,dataMurine$Grupo== "Tratamiento A sin tumor"); dataTrAtumorless<-dataTrAtumorless[-c(2)]
dataTrBtumor<-subset(dataMurine,dataMurine$Grupo== "Tratamiento B con tumor"); dataTrBtumor<-dataTrBtumor[-c(2)]
dataTrBtumorless<-subset(dataMurine,dataMurine$Grupo== "Tratamiento B sin tumor"); dataTrBtumorless<-dataTrBtumorless[-c(2)]
dataTrCtumor<-subset(dataMurine,dataMurine$Grupo== "Animal control con tumor"); dataTrCtumor<-dataTrCtumor[-c(2)]
dataTrCtumorless<-subset(dataMurine,dataMurine$Grupo== "Animal control sin tumor"); dataTrCtumorless<-dataTrCtumorless[-c(2)]
```
### Mostramos por pantalla los parámetrod de dichas variables según los diferentes grupos
```{r}
summary(dataTrAtumor);summary(dataTrAtumorless)

summary(dataTrBtumor);summary(dataTrBtumorless)

summary(dataTrCtumor);summary(dataTrCtumorless)
```


## Apartado 5
```{r}

```



## Apartado 6 
```{r}

```



## Apartado 7
```{r}

```



## Apartado 8
```{r}

```



